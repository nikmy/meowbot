## Целевые метрики сервиса

- Общее количество пользователей - **до 100 тыс**
- Активность пользователей: ежедневно (DAU) - **до 70 тыс**
- Максимальное количество запросов в секунду (RPS) - **1000**
- Среднее время отклика - не более **1 с**
- Максимальное число активных напоминаний одного пользователя - **30**
- Максимальное число одновременных (в рамках 1 минуты) напоминаний - **3000**
- Максимальная задержка напоминания в период нормальной работы - **1 мин**
- Максимальная задержка напоминания с учётом отказов - **10 мин**

## Некоторые сведения об использовании RAM

- Стек одной горутины - **от 8 MB**
- Размер одного напоминания в JSON - **от 3 KB**

## Выводы

- С учётом того, что на одного пользователя приходится до **40 KB** данных (посчитано так:
`30 * (2 * Sizeof(telebot.Message{}) + Sizeof(Reminder{})) + Sizeof(int64(0))`), получается,
что для хранения данных по всем пользователям необходимо до **4 GB** RAM. Так как имеет место
дублирования (для быстрой выборки по пользователям и быстрого поиска по ID напоминания), всего
может потребоваться до **8 GB** RAM.

- Так как на каждое "предстоящее" напоминание нужна отдельная горутина, в силу особенностей
Go Runtime может потребоваться **3000 * 8 MB = 24 GB** RAM. Также потребуются пулы для парсинга и
сериализации JSON (десятки MB RAM), память для горутин, сохраняющих данные и обрабатывающих ввод пользователя
(не более **1 GB** RAM), и память для сущностей вроде бота и сообщений (десятки KB RAM).

- Таким образом, использовать одну машину для всего сервиса довольно проблематично, с учётом
возможности пиковой нагрузки из-за долгосрочного периода планирования в 15 мин и работы GC. Для
масштабируемого решения необходимо сразу делать систему распределённой.
